import{l as $,g as L,A as F,W as S,Q as _,R as q,s as M}from"./utils-DOcU9-q_.js";$();k();async function k(){const s=L("players")||[];for(const p of s)await Y(p);C()}async function Y(s){const y=await(await F("https://sports.core.api.espn.com/v2/sports/football/leagues/nfl/athletes?limit=1000&active=true")).items.map(h=>h.$ref);for(const h of y){const u=await F(h);if(u.id===s){const i=u.displayName,T=u.team.$ref,A=(await F(T)).displayName,r=u.position?.displayName||"",D=u.statistics?.$ref,t=await F(D),P=u.headshot?.href||"../public/images/default_player.png";if(console.log({id:s,name:i,team:A,position:r,headshot:P,statisticsData:t}),r==="Wide Receiver"){let e=null;for(const w of t.splits.categories)if(w.name==="scoring"){e=w;break}const a=t.splits.categories[0].stats[6].value,d=t.splits.categories[3].stats[12].value,c=t.splits.categories[3].stats[16].value;let o=Math.floor(c/a);c===0&&(o=0);const g=(d/a).toFixed(2),l=e?e.stats[6].value:0;let n=(l/a).toFixed(2);l===0&&(n=0);const m=await S(g,o,n);console.log(m);let v=document.querySelector(".players");v.innerHTML+=await R(s,i,r,P,m),C()}else if(r==="Quarterback"){for(const H of t.splits.categories)if(H.name==="scoring")break;const e=t.splits.categories[0].stats[6].value,a=t.splits.categories[1].stats[18].value,d=parseFloat((a/e).toFixed(2)),c=t.splits.categories[1].stats[22].value,o=t.splits.categories[2].stats[12].value,g=parseFloat(o/e.toFixed(2)),l=t.splits.categories[7].stats[8].value,n=parseFloat((l/e).toFixed(2)),m=t.splits.categories[0].stats[0].value;let v=parseFloat((m/e).toFixed(2));m===0&&(v=0);const w=t.splits.categories[7].stats[12].value;let b=parseFloat((w/e).toFixed(2));w===0&&(b=0);const x=await _(c,d,g,n,v,b);console.log(x);let G=document.querySelector(".players");G.innerHTML+=await R(s,i,r,P,x)}else if(r==="Running Back"){let e=null;for(const n of t.splits.categories)if(n.name==="scoring"){e=n;break}const a=t.splits.categories[0].stats[6].value,d=t.splits.categories[2].stats[5].value.toFixed(2),c=e?e.stats[8].value:0;let o=parseFloat(c/a).toFixed(2);c===0&&(o=0);const g=await q(d,o);console.log(g);let l=document.querySelector(".players");l.innerHTML+=await R(s,i,r,P,g)}else if(r==="Tight End"){let e=null;for(const v of t.splits.categories)if(v.name==="scoring"){e=v;break}const a=t.splits.categories[0].stats[6].value,d=parseFloat((t.splits.categories[3].stats[16].displayValue/a).toFixed(2)),c=t.splits.categories[3].stats[12].value,o=e?e.stats[6].value:0;let g=parseFloat((o/a).toFixed(2)),l=parseFloat((c/a).toFixed(2));o===0&&(l=0),console.log(l,d,g);const n=await S(l,d,g);console.log(n);let m=document.querySelector(".players");m.innerHTML+=await R(s,i,r,P,n)}}}}async function R(s,p,f,y,h){const u=`
    <li class='Player_Card_Holders'>
        <div class = "playersHolder">
        <h1 class='card__names centered' >${p}</h1>
        <a class='player_Images'>
            <img class= 'player_Images'
            src='${y}' />
        </a>
        <h2>Position: ${f} </h2>
        <p>Player Fantasy Points Per Game: ${h} <br>
            <div class="remove-container">
                <a href='#' class='remove' data-id='${s}'><strong>Remove Player</strong></a></p>
            </div>
        </div>
    </li>`,i=document.getElementById("totalPoints");if(i){const T=parseFloat(i.textContent)||0;i.textContent=T+h}return u}async function B(s){const f=(L("players")||[]).filter(y=>String(y)!==String(s));M("players",f)}function C(){document.querySelectorAll(".remove").forEach(s=>{s.addEventListener("click",async p=>{p.preventDefault(),console.log("Removing");const f=p.target.closest(".remove").dataset.id;await B(f),console.log("RemovedPlayer");let y=document.querySelector(".players");y.innerHTML="",document.getElementById("totalPoints").textContent=0,console.log("Refreshed"),await k()})})}
